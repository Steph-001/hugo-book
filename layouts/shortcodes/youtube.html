{{ $id := .Get 0 }}
{{ $title := .Get "title" | default "YouTube Video" }}
{{ $class := .Get "class" | default "youtube-container" }}
{{ $autoplay := .Get "autoplay" | default false }}
{{ $loop := .Get "loop" | default false }}

<div class="{{ $class }}">
  {{ with $title }}<h4>{{ . }}</h4>{{ end }}
  <div class="responsive-iframe-container">
    <iframe 
      src="https://www.youtube.com/embed/{{ $id }}{{ if $autoplay }}?autoplay=1{{ end }}{{ if $loop }}&loop=1{{ end }}" 
      frameborder="0" 
      allowfullscreen
      loading="lazy"
    ></iframe>
  </div>
</div>

<style>
  .youtube-container {
    margin: 1.5rem 0;
    width: 100%;
  }
  
  .responsive-iframe-container {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
    overflow: hidden;
    max-width: 100%;
  }
  
  .responsive-iframe-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 4px;
  }
  
  @media (max-width: 768px) {
    .youtube-container {
      margin: 1rem 0;
    }
  }
</style>
